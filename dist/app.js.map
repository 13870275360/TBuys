{"version":3,"sources":["../app.js"],"names":["express","require","cookieParser","bodyParser","multer","session","path","ejs","app","mongodb","mongoose","set","join","__dirname","engine","__express","use","json","urlencoded","extended","static","secret","cookie","maxAge","resave","saveUninitialized","req","res","next","locals","user","err","error","message","get","render","listen"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,eAAeD,QAAQ,eAAR,CAAnB;AACA,IAAIE,aAAaF,QAAQ,aAAR,CAAjB;AACA,IAAIG,SAASH,QAAQ,QAAR,CAAb;AACA,IAAII,UAAUJ,QAAQ,iBAAR,CAAd;AACA,IAAIK,OAAOL,QAAQ,MAAR,CAAX;AACA,IAAIM,MAAMN,QAAQ,KAAR,CAAV;AACA,IAAIO,MAAMR,SAAV;AACA,IAAIS,UAAUR,QAAQ,eAAR,CAAd;AACA,IAAIS,WAAWT,QAAQ,UAAR,CAAf;;AAEAO,IAAIG,GAAJ,CAAQ,OAAR,EAAiBL,KAAKM,IAAL,CAAUC,SAAV,EAAqB,OAArB,CAAjB;AACAL,IAAIG,GAAJ,CAAQ,aAAR,EAAuB,MAAvB;AACAH,IAAIM,MAAJ,CAAW,OAAX,EAAoBP,IAAIQ,SAAxB;AACA;AACAP,IAAIQ,GAAJ,CAAQb,WAAWc,IAAX,EAAR;AACAT,IAAIQ,GAAJ,CAAQb,WAAWe,UAAX,CAAsB,EAACC,UAAU,IAAX,EAAtB,CAAR;AACAX,IAAIQ,GAAJ,CAAQhB,QAAQoB,MAAR,CAAed,KAAKM,IAAL,CAAUC,SAAV,EAAqB,QAArB,CAAf,CAAR;AACAL,IAAIQ,GAAJ,CAAQZ,QAAR;AACAI,IAAIQ,GAAJ,CAAQd,cAAR;;AAEAM,IAAIQ,GAAJ,CAAQX,QAAQ;AACZgB,YAAQ,QADI;AAEZC,YAAQ;AACJC,gBAAQ,OAAO,EAAP,GAAY;AADhB,KAFI;AAKZC,YAAQ,IALI;AAMZC,uBAAmB;AANP,CAAR,CAAR;;AASAjB,IAAIQ,GAAJ,CAAQ,UAAUU,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0B;AAC9BD,QAAIE,MAAJ,CAAWC,IAAX,GAAkBJ,IAAIrB,OAAJ,CAAYyB,IAA9B,CAD8B,CACK;AACnC,QAAIC,MAAML,IAAIrB,OAAJ,CAAY2B,KAAtB,CAF8B,CAEF;AAC5BL,QAAIE,MAAJ,CAAWI,OAAX,GAAqB,EAArB,CAH8B,CAGN;AACxB,QAAIF,GAAJ,EAAS;AACLJ,YAAIE,MAAJ,CAAWI,OAAX,GAAqB,6EAA6EF,GAA7E,GAAmF,QAAxG;AACH,KAFD,MAEO;AACHH;AACH;AACJ,CATD;;AAWApB,IAAI0B,GAAJ,CAAQ,GAAR,EAAa,UAAUR,GAAV,EAAeC,GAAf,EAAoB;AAC7BA,QAAIQ,MAAJ,CAAW,UAAX;AACH,CAFD;AAGA3B,IAAI4B,MAAJ,CAAW,EAAX","file":"app.js","sourcesContent":["var express = require('express');\r\nvar cookieParser = require('cookie-parser');\r\nvar bodyParser = require('body-parser');\r\nvar multer = require('multer');\r\nvar session = require('express-session');\r\nvar path = require('path');\r\nvar ejs = require('ejs');\r\nvar app = express();\r\nvar mongodb = require('connect-mongo');\r\nvar mongoose = require('mongoose');\r\n\r\napp.set('views', path.join(__dirname, 'views'));\r\napp.set('view engine', 'html');\r\napp.engine('.html', ejs.__express);\r\n//调用中间件\r\napp.use(bodyParser.json());\r\napp.use(bodyParser.urlencoded({extended: true}));\r\napp.use(express.static(path.join(__dirname, 'public')));\r\napp.use(multer());\r\napp.use(cookieParser());\r\n\r\napp.use(session({\r\n    secret: 'secret',\r\n    cookie: {\r\n        maxAge: 1000 * 60 * 30\r\n    },\r\n    resave: true,\r\n    saveUninitialized: false\r\n}));\r\n\r\napp.use(function (req, res, next) {\r\n    res.locals.user = req.session.user;//保存用户信息\r\n    var err = req.session.error;//保存结果响应信息\r\n    res.locals.message = '';//保存html标签\r\n    if (err) {\r\n        res.locals.message = '<div class=\"alert alert-danger\" style=\"margin-bottom: 20px;color: red;\">' + err + '</div>'\r\n    } else {\r\n        next();\r\n    }\r\n});\r\n\r\napp.get('/', function (req, res) {\r\n    res.render('register');\r\n});\r\napp.listen(80);"]}